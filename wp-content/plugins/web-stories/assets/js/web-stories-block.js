(()=>{var e={184:(e,t)=>{var r;!function(){"use strict";var o={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)){if(r.length){var l=i.apply(null,r);l&&e.push(l)}}else if("object"===s)if(r.toString===Object.prototype.toString)for(var n in r)o.call(r,n)&&r[n]&&e.push(n);else e.push(r.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},474:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){var e="undefined"!=typeof window?window:this,t=e.Glider=function(t,r){var o=this;if(t._glider)return t._glider;if(o.ele=t,o.ele.classList.add("glider"),o.ele._glider=o,o.opt=Object.assign({},{slidesToScroll:1,slidesToShow:1,resizeLock:!0,duration:.5,easing:function(e,t,r,o,i){return o*(t/=i)*t+r}},r),o.animate_id=o.page=o.slide=0,o.arrows={},o._opt=o.opt,o.opt.skipTrack)o.track=o.ele.children[0];else for(o.track=document.createElement("div"),o.ele.appendChild(o.track);1!==o.ele.children.length;)o.track.appendChild(o.ele.children[0]);o.track.classList.add("glider-track"),o.init(),o.resize=o.init.bind(o,!0),o.event(o.ele,"add",{scroll:o.updateControls.bind(o)}),o.event(e,"add",{resize:o.resize})},r=t.prototype;return r.init=function(e,t){var r=this,o=0,i=0;r.slides=r.track.children,[].forEach.call(r.slides,(function(e,t){e.classList.add("glider-slide"),e.setAttribute("data-gslide",t)})),r.containerWidth=r.ele.clientWidth;var s=r.settingsBreakpoint();if(t||(t=s),"auto"===r.opt.slidesToShow||void 0!==r.opt._autoSlide){var l=r.containerWidth/r.opt.itemWidth;r.opt._autoSlide=r.opt.slidesToShow=r.opt.exactWidth?l:Math.max(1,Math.floor(l))}"auto"===r.opt.slidesToScroll&&(r.opt.slidesToScroll=Math.floor(r.opt.slidesToShow)),r.itemWidth=r.opt.exactWidth?r.opt.itemWidth:r.containerWidth/r.opt.slidesToShow,[].forEach.call(r.slides,(function(e){e.style.height="auto",e.style.width=r.itemWidth+"px",o+=r.itemWidth,i=Math.max(e.offsetHeight,i)})),r.track.style.width=o+"px",r.trackWidth=o,r.isDrag=!1,r.preventClick=!1,r.opt.resizeLock&&r.scrollTo(r.slide*r.itemWidth,0),(s||t)&&(r.bindArrows(),r.buildDots(),r.bindDrag()),r.updateControls(),r.emit(e?"refresh":"loaded")},r.bindDrag=function(){var e=this;e.mouse=e.mouse||e.handleMouse.bind(e);var t=function(){e.mouseDown=void 0,e.ele.classList.remove("drag"),e.isDrag&&(e.preventClick=!0),e.isDrag=!1},r={mouseup:t,mouseleave:t,mousedown:function(t){t.preventDefault(),t.stopPropagation(),e.mouseDown=t.clientX,e.ele.classList.add("drag")},mousemove:e.mouse,click:function(t){e.preventClick&&(t.preventDefault(),t.stopPropagation()),e.preventClick=!1}};e.ele.classList.toggle("draggable",!0===e.opt.draggable),e.event(e.ele,"remove",r),e.opt.draggable&&e.event(e.ele,"add",r)},r.buildDots=function(){var e=this;if(e.opt.dots){if("string"==typeof e.opt.dots?e.dots=document.querySelector(e.opt.dots):e.dots=e.opt.dots,e.dots){e.dots.innerHTML="",e.dots.classList.add("glider-dots");for(var t=0;t<Math.ceil(e.slides.length/e.opt.slidesToShow);++t){var r=document.createElement("button");r.dataset.index=t,r.setAttribute("aria-label","Page "+(t+1)),r.setAttribute("role","tab"),r.className="glider-dot "+(t?"":"active"),e.event(r,"add",{click:e.scrollItem.bind(e,t,!0)}),e.dots.appendChild(r)}}}else e.dots&&(e.dots.innerHTML="")},r.bindArrows=function(){var e=this;e.opt.arrows?["prev","next"].forEach((function(t){var r=e.opt.arrows[t];r&&("string"==typeof r&&(r=document.querySelector(r)),r&&(r._func=r._func||e.scrollItem.bind(e,t),e.event(r,"remove",{click:r._func}),e.event(r,"add",{click:r._func}),e.arrows[t]=r))})):Object.keys(e.arrows).forEach((function(t){var r=e.arrows[t];e.event(r,"remove",{click:r._func})}))},r.updateControls=function(e){var t=this;e&&!t.opt.scrollPropagate&&e.stopPropagation();var r=t.containerWidth>=t.trackWidth;t.opt.rewind||(t.arrows.prev&&(t.arrows.prev.classList.toggle("disabled",t.ele.scrollLeft<=0||r),t.arrows.prev.classList.contains("disabled")?t.arrows.prev.setAttribute("aria-disabled",!0):t.arrows.prev.setAttribute("aria-disabled",!1)),t.arrows.next&&(t.arrows.next.classList.toggle("disabled",Math.ceil(t.ele.scrollLeft+t.containerWidth)>=Math.floor(t.trackWidth)||r),t.arrows.next.classList.contains("disabled")?t.arrows.next.setAttribute("aria-disabled",!0):t.arrows.next.setAttribute("aria-disabled",!1))),t.slide=Math.round(t.ele.scrollLeft/t.itemWidth),t.page=Math.round(t.ele.scrollLeft/t.containerWidth);var o=t.slide+Math.floor(Math.floor(t.opt.slidesToShow)/2),i=Math.floor(t.opt.slidesToShow)%2?0:o+1;1===Math.floor(t.opt.slidesToShow)&&(i=0),t.ele.scrollLeft+t.containerWidth>=Math.floor(t.trackWidth)&&(t.page=t.dots?t.dots.children.length-1:0),[].forEach.call(t.slides,(function(e,r){var s=e.classList,l=s.contains("visible"),n=t.ele.scrollLeft,a=t.ele.scrollLeft+t.containerWidth,c=t.itemWidth*r,d=c+t.itemWidth;[].forEach.call(s,(function(e){/^left|right/.test(e)&&s.remove(e)})),s.toggle("active",t.slide===r),o===r||i&&i===r?s.add("center"):(s.remove("center"),s.add([r<o?"left":"right",Math.abs(r-(r<o?o:i||o))].join("-")));var u=Math.ceil(c)>=Math.floor(n)&&Math.floor(d)<=Math.ceil(a);s.toggle("visible",u),u!==l&&t.emit("slide-"+(u?"visible":"hidden"),{slide:r})})),t.dots&&[].forEach.call(t.dots.children,(function(e,r){e.classList.toggle("active",t.page===r)})),e&&t.opt.scrollLock&&(clearTimeout(t.scrollLock),t.scrollLock=setTimeout((function(){clearTimeout(t.scrollLock),Math.abs(t.ele.scrollLeft/t.itemWidth-t.slide)>.02&&(t.mouseDown||t.trackWidth>t.containerWidth+t.ele.scrollLeft&&t.scrollItem(t.getCurrentSlide()))}),t.opt.scrollLockDelay||250))},r.getCurrentSlide=function(){var e=this;return e.round(e.ele.scrollLeft/e.itemWidth)},r.scrollItem=function(e,t,r){r&&r.preventDefault();var o=this,i=e;if(++o.animate_id,!0===t)e*=o.containerWidth,e=Math.round(e/o.itemWidth)*o.itemWidth;else{if("string"==typeof e){var s="prev"===e;if(e=o.opt.slidesToScroll%1||o.opt.slidesToShow%1?o.getCurrentSlide():o.slide,s?e-=o.opt.slidesToScroll:e+=o.opt.slidesToScroll,o.opt.rewind){var l=o.ele.scrollLeft;e=s&&!l?o.slides.length:!s&&l+o.containerWidth>=Math.floor(o.trackWidth)?0:e}}e=Math.max(Math.min(e,o.slides.length),0),o.slide=e,e=o.itemWidth*e}return o.scrollTo(e,o.opt.duration*Math.abs(o.ele.scrollLeft-e),(function(){o.updateControls(),o.emit("animated",{value:i,type:"string"==typeof i?"arrow":t?"dot":"slide"})})),!1},r.settingsBreakpoint=function(){var t=this,r=t._opt.responsive;if(r){r.sort((function(e,t){return t.breakpoint-e.breakpoint}));for(var o=0;o<r.length;++o){var i=r[o];if(e.innerWidth>=i.breakpoint)return t.breakpoint!==i.breakpoint&&(t.opt=Object.assign({},t._opt,i.settings),t.breakpoint=i.breakpoint,!0)}}var s=0!==t.breakpoint;return t.opt=Object.assign({},t._opt),t.breakpoint=0,s},r.scrollTo=function(t,r,o){var i=this,s=(new Date).getTime(),l=i.animate_id,n=function(){var a=(new Date).getTime()-s;i.ele.scrollLeft=i.ele.scrollLeft+(t-i.ele.scrollLeft)*i.opt.easing(0,a,0,1,r),a<r&&l===i.animate_id?e.requestAnimationFrame(n):(i.ele.scrollLeft=t,o&&o.call(i))};e.requestAnimationFrame(n)},r.removeItem=function(e){var t=this;t.slides.length&&(t.track.removeChild(t.slides[e]),t.refresh(!0),t.emit("remove"))},r.addItem=function(e){var t=this;t.track.appendChild(e),t.refresh(!0),t.emit("add")},r.handleMouse=function(e){var t=this;t.mouseDown&&(t.isDrag=!0,t.ele.scrollLeft+=(t.mouseDown-e.clientX)*(t.opt.dragVelocity||3.3),t.mouseDown=e.clientX)},r.round=function(e){var t=1/(this.opt.slidesToScroll%1||1);return Math.round(e*t)/t},r.refresh=function(e){this.init(!0,e)},r.setOption=function(e,t){var r=this;r.breakpoint&&!t?r._opt.responsive.forEach((function(t){t.breakpoint===r.breakpoint&&(t.settings=Object.assign({},t.settings,e))})):r._opt=Object.assign({},r._opt,e),r.breakpoint=0,r.settingsBreakpoint()},r.destroy=function(){var t=this,r=t.ele.cloneNode(!0),o=function(e){e.removeAttribute("style"),[].forEach.call(e.classList,(function(t){/^glider/.test(t)&&e.classList.remove(t)}))};r.children[0].outerHTML=r.children[0].innerHTML,o(r),[].forEach.call(r.getElementsByTagName("*"),o),t.ele.parentNode.replaceChild(r,t.ele),t.event(e,"remove",{resize:t.resize}),t.emit("destroy")},r.emit=function(t,r){var o=this,i=new e.CustomEvent("glider-"+t,{bubbles:!o.opt.eventPropagate,detail:r});o.ele.dispatchEvent(i)},r.event=function(e,t,r){var o=e[t+"EventListener"].bind(e);Object.keys(r).forEach((function(e){o(e,r[e])}))},t})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function __webpack_require__(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,__webpack_require__),i.exports}(()=>{"use strict";const e="webStoriesTrackingDataLayer";function t(){window[e]=window[e]||[],window[e].push(arguments)}const{trackingAllowed:r,trackingId:o,trackingIdGA4:i,appVersion:s,userProperties:l}=window.webStoriesTrackingSettings||{},n={trackingAllowed:!1,trackingEnabled:!1,trackingId:"",trackingIdGA4:"",userProperties:{},trackingAllowed:r,trackingId:o,trackingIdGA4:i,appVersion:s,userProperties:l},a="data-web-stories-tracking";function c(e){return new Promise(((t,r)=>{const o=document.createElement("script");o.setAttribute(a,""),o.async=!0,o.src=e,o.addEventListener("load",t),o.addEventListener("error",r),document.head.appendChild(o)}))}const d=async function(r){n.trackingAllowed&&!n.trackingEnabled&&(await async function(){let r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(document.querySelector(`script[${a}]`))return;try{await c(`https://www.googletagmanager.com/gtag/js?id=${n.trackingId}&l=${e}`)}catch{return}const o=n.appName,i="/"+n.appName.replace(/ /g,"-").toLowerCase();t("js",new Date),t("set",{custom_map:{dimension1:"analytics",dimension2:"adNetwork",dimension3:"search_order",dimension4:"search_orderby",dimension5:"file_size",dimension6:"file_type",dimension7:"status",dimension8:"siteLocale",dimension9:"userLocale",dimension10:"userRole",dimension11:"enabledExperiments",dimension12:"wpVersion",dimension13:"phpVersion",dimension14:"isMultisite",dimension15:"name",dimension16:"activePlugins",dimension20:"serverEnvironment"}}),t("set","user_properties",n.userProperties),t("config",n.trackingId,{anonymize_ip:!0,app_name:n.appName,app_version:n.appVersion,send_page_view:r,transport_type:"beacon",page_title:o,page_path:i,...n.userProperties}),t("config",n.trackingIdGA4,{app_name:n.appName,app_version:n.appVersion,send_page_view:r,transport_type:"beacon",page_title:o,page_path:i})}(r),n.trackingEnabled=!0)};const u=async function(){return await d(),Boolean(n.trackingEnabled)};const m=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((o=>{const i=setTimeout((()=>{window.console.warn(`[Web Stories] Tracking event "${e}" took too long to fire.`),o()}),1e3);t("event",e,{...r,event_callback:()=>{clearTimeout(i),o()}})}))};const h=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!await u())return Promise.resolve();const o={description:`${e}: ${t}`,fatal:r};return m("exception",o)},p=["ResizeObserver loop limit exceeded"];function b(e){if(e.filename&&!e.filename.includes("web-stories"))return;if(p.includes(e.message))return;const t=`${e.message} (${e.lineno}:${e.colno})`;h("uncaught_error",t,!0)}function w(e){const t=e.reason||"Promise rejection";h("uncaught_promise",t)}const g=function(){window.addEventListener("error",b),window.addEventListener("unhandledrejection",w)};const f=async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.appName=e,await d(t),g()};const _=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!await u())return Promise.resolve();let r={};const{search_type:o,duration:i,title_length:s,unread_count:l,...a}=t;return o?r={...a,event_label:o}:i?r={...a,value:i}:s?r={...a,value:s}:l&&(r={...a,value:l}),Object.values(r).length?(m(e,{...r,send_to:n.trackingId}),m(e,{...t,send_to:n.trackingIdGA4}),Promise.resolve()):m(e,t)};const v=window.wp.blocks,y=window.React,E=window.wp.i18n,S=window.wp.compose;var k,C,x;function T(){return T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},T.apply(this,arguments)}const SvgCirclesCarouselView=e=>{let{title:t,titleId:r,...o}=e;return y.createElement("svg",T({viewBox:"0 0 23 18",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},o),t?y.createElement("title",{id:r},t):null,k||(k=y.createElement("circle",{r:3,transform:"matrix(1 0 0 -1 20 9)"})),C||(C=y.createElement("circle",{r:3,transform:"matrix(1 0 0 -1 3 9)"})),x||(x=y.createElement("circle",{r:7.1,transform:"matrix(1 0 0 -1 12 9)",stroke:"#fff",strokeWidth:2.2})))},L=(0,y.memo)(SvgCirclesCarouselView);var N,M,B,A,O;function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},I.apply(this,arguments)}const SvgCirclesCarouselViewPanelIcon=e=>{let{title:t,titleId:r,...o}=e;return y.createElement("svg",I({viewBox:"0 0 42 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},o),t?y.createElement("title",{id:r},t):null,N||(N=y.createElement("circle",{cx:21,cy:12,r:11,fill:"#fff",stroke:"#347BB5",strokeWidth:2})),M||(M=y.createElement("mask",{id:"a",fill:"#fff"},y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M34.803 17.88A14.952 14.952 0 0 0 36 12c0-2.087-.426-4.075-1.197-5.88a6 6 0 1 1 0 11.761Z"}))),B||(B=y.createElement("path",{d:"m34.803 17.88-1.84-.784-.962 2.258 2.406.487.396-1.96Zm0-11.76-.396-1.96L32 4.645l.963 2.258 1.84-.785ZM34 12c0 1.813-.37 3.534-1.036 5.096l3.679 1.57A16.952 16.952 0 0 0 38 12h-4Zm-1.036-5.096A12.952 12.952 0 0 1 34 12h4c0-2.362-.483-4.616-1.357-6.665l-3.68 1.57ZM35.2 8.08c.257-.052.524-.08.8-.08V4c-.544 0-1.077.055-1.593.16l.793 3.92ZM36 8a4 4 0 0 1 4 4h4a8 8 0 0 0-8-8v4Zm4 4a4 4 0 0 1-4 4v4a8 8 0 0 0 8-8h-4Zm-4 4c-.276 0-.543-.028-.8-.08l-.793 3.92c.516.105 1.05.16 1.593.16v-4Z",fill:"#347BB5",mask:"url(#a)"})),A||(A=y.createElement("mask",{id:"b",fill:"#fff"},y.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.197 6.12a6 6 0 1 0 0 11.761A14.952 14.952 0 0 1 6 12c0-2.087.426-4.075 1.197-5.88Z"}))),O||(O=y.createElement("path",{d:"m7.197 6.12 1.84.784.962-2.258-2.406-.487-.396 1.96Zm0 11.76.396 1.96L10 19.355l-.963-2.258-1.84.785ZM6 8c.276 0 .543.028.8.08l.793-3.92A8.028 8.028 0 0 0 6 4v4Zm-4 4a4 4 0 0 1 4-4V4a8 8 0 0 0-8 8h4Zm4 4a4 4 0 0 1-4-4h-4a8 8 0 0 0 8 8v-4Zm.8-.08c-.257.052-.524.08-.8.08v4c.544 0 1.077-.055 1.593-.16L6.8 15.92Zm2.236 1.176A12.952 12.952 0 0 1 8 12H4c0 2.362.483 4.616 1.357 6.665l3.68-1.57ZM8 12c0-1.813.37-3.534 1.036-5.096l-3.679-1.57A16.952 16.952 0 0 0 4 12h4Z",fill:"#347BB5",mask:"url(#b)"})))},W=(0,y.memo)(SvgCirclesCarouselViewPanelIcon);var P,R;function z(){return z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},z.apply(this,arguments)}const SvgLatestStoriesBlock=e=>{let{title:t,titleId:r,...o}=e;return y.createElement("svg",z({viewBox:"0 0 31 42",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},o),t?y.createElement("title",{id:r},t):null,P||(P=y.createElement("rect",{x:1,y:1,width:29,height:40,rx:1,stroke:"currentColor",strokeWidth:2})),R||(R=y.createElement("path",{fill:"currentColor",d:"M6 27h19v2H6zM6 31h4v2H6z"})))},D=(0,y.memo)(SvgLatestStoriesBlock);var F,$;function j(){return j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},j.apply(this,arguments)}const SvgSelectedStoriesBlock=e=>{let{title:t,titleId:r,...o}=e;return y.createElement("svg",j({viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},o),t?y.createElement("title",{id:r},t):null,F||(F=y.createElement("circle",{cx:16,cy:16,r:15,stroke:"currentColor",strokeWidth:2})),$||($=y.createElement("path",{d:"M16 9.263V16m0 6.737V16m0 0H9.263M16 16h6.737",stroke:"currentColor",strokeWidth:2})))},H=(0,y.memo)(SvgSelectedStoriesBlock);var V;function U(){return U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},U.apply(this,arguments)}const SvgEmbedStoryBlock=e=>{let{title:t,titleId:r,...o}=e;return y.createElement("svg",U({viewBox:"0 0 32 16",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},o),t?y.createElement("title",{id:r},t):null,V||(V=y.createElement("path",{d:"M14 1H8a7 7 0 1 0 0 14h6M18 1h6a7 7 0 1 1 0 14h-6M9 8h13.5",stroke:"currentColor",strokeWidth:2})))},G=(0,y.memo)(SvgEmbedStoryBlock);var Z;function q(){return q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},q.apply(this,arguments)}const SvgGridView=e=>{let{title:t,titleId:r,...o}=e;return y.createElement("svg",q({viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},o),t?y.createElement("title",{id:r},t):null,Z||(Z=y.createElement("path",{d:"M0 0h5v6H0zM0 8h5v6H0zM7 0h5v6H7zM7 8h5v6H7z"})))},Q=(0,y.memo)(SvgGridView);var X;function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},K.apply(this,arguments)}const SvgListView=e=>{let{title:t,titleId:r,...o}=e;return y.createElement("svg",K({viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},o),t?y.createElement("title",{id:r},t):null,X||(X=y.createElement("path",{d:"M0 0h12v3H0zM0 5h12v3H0zM0 10h12v3H0z"})))},J=(0,y.memo)(SvgListView);var Y;function ee(){return ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ee.apply(this,arguments)}const SvgBoxCarouselView=e=>{let{title:t,titleId:r,...o}=e;return y.createElement("svg",ee({viewBox:"0 0 18 14",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},o),t?y.createElement("title",{id:r},t):null,Y||(Y=y.createElement("path",{d:"M4 14h10V0H4zM16 12h2V2h-2zM0 12h2V2H0z"})))},te=(0,y.memo)(SvgBoxCarouselView);var re;function oe(){return oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},oe.apply(this,arguments)}const SvgGridViewPanelIcon=e=>{let{title:t,titleId:r,...o}=e;return y.createElement("svg",oe({viewBox:"0 0 20 27",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},o),t?y.createElement("title",{id:r},t):null,re||(re=y.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M1 1h6.462v9.538H1zM1 15.615h6.462v9.538H1zM12.539 1h6.462v9.538h-6.462zM12.539 15.615h6.462v9.538h-6.462z"})))},ie=(0,y.memo)(SvgGridViewPanelIcon);var se;function le(){return le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},le.apply(this,arguments)}const SvgListViewPanelIcon=e=>{let{title:t,titleId:r,...o}=e;return y.createElement("svg",le({viewBox:"0 0 22 26",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},o),t?y.createElement("title",{id:r},t):null,se||(se=y.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M1 1h20v4H1zM1 11h20v4H1zM1 21h20v4H1z"})))},ne=(0,y.memo)(SvgListViewPanelIcon);var ae,ce;function de(){return de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},de.apply(this,arguments)}const SvgBoxCarouselViewPanelIcon=e=>{let{title:t,titleId:r,...o}=e;return y.createElement("svg",de({viewBox:"0 0 26 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":r},o),t?y.createElement("title",{id:r},t):null,ae||(ae=y.createElement("path",{stroke:"currentColor",strokeWidth:2,d:"M7 1h12v18H7z"})),ce||(ce=y.createElement("path",{fill:"currentColor",d:"M24 2h2v16h-2zM0 2h2v16H0z"})))},ue=(0,y.memo)(SvgBoxCarouselViewPanelIcon),me=y.createElement(D,{width:31,height:42}),he=y.createElement(H,{width:32,height:32}),pe=y.createElement(G,{width:32,height:16}),be=y.createElement(te,{width:18,height:14}),we=y.createElement(L,{className:"web-stories-block__toolbar-icon icon__circles-carousel",width:23,height:18}),ge=y.createElement(Q,{width:12,height:14}),fe=y.createElement(J,{width:12,height:13}),_e=y.createElement(ue,{width:26,height:20}),ve=y.createElement(ne,{width:22,height:26}),ye=y.createElement(W,{width:42,height:24}),Ee=y.createElement(ie,{width:20,height:27}),BlockIcon=()=>{const e=(0,S.useInstanceId)(BlockIcon);return y.createElement("svg",{fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},y.createElement("circle",{cx:"32",cy:"32",r:"32",transform:"rotate(-180 32 32)",fill:`url(#gradient-${e})`}),y.createElement("g",{filter:`url(#filter-${e})`,fill:"#fff"},y.createElement("path",{d:"M41.6 19.2a3.2 3.2 0 013.2 3.2v19.2a3.2 3.2 0 01-3.2 3.2V19.2zm-24 0a3.2 3.2 0 013.2-3.2h14.4a3.2 3.2 0 013.2 3.2v25.6a3.2 3.2 0 01-3.2 3.2H20.8a3.2 3.2 0 01-3.2-3.2V19.2zM48 22.4a2.4 2.4 0 012.4 2.4v14.4a2.4 2.4 0 01-2.4 2.4V22.4z"})),y.createElement("defs",null,y.createElement("linearGradient",{id:`gradient-${e}`,x1:"13.255",y1:"6.599",x2:"35.289",y2:"62.791",gradientUnits:"userSpaceOnUse"},y.createElement("stop",{stopColor:"#79B3FF"}),y.createElement("stop",{offset:"1",stopColor:"#CBACFF"})),y.createElement("filter",{id:`filter-${e}`,x:"8.96",y:"10.24",width:"46.08",height:"46.08",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},y.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),y.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),y.createElement("feOffset",{dy:"1.28"}),y.createElement("feGaussianBlur",{stdDeviation:"1.92"}),y.createElement("feColorMatrix",{values:"0 0 0 0 0.423529 0 0 0 0 0.490196 0 0 0 0 0.733333 0 0 0 0.3 0"}),y.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),y.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))};const Se=function(e){let{attributes:t}=e;const{url:r,title:o,poster:i,width:s,height:l,align:n="none"}=t;return r&&o?y.createElement("div",{className:`wp-block-web-stories-embed align${n}`},y.createElement("a",{href:r},i?y.createElement("img",{alt:o,src:i,width:s,height:l}):o)):null},ke={url:{type:"string"},title:{type:"string"},poster:{type:"string"},width:{type:"number",default:360},height:{type:"number",default:600},align:{type:"string",default:"none"}};const Ce={attributes:ke,save:function(e){let{attributes:t}=e;const{url:r,title:o,poster:i,width:s,height:l,align:n="none"}=t;return r&&o?y.createElement("div",{className:`wp-block-web-stories-embed align${n}`},y.createElement("amp-story-player",{style:{width:s?`${s}px`:void 0,height:l?`${l}px`:void 0},"data-testid":"amp-story-player"},y.createElement("a",{href:r,style:{"--story-player-poster":i?`url('${i}')`:void 0}},o))):null}},xe=[{attributes:ke,migrate:e=>({...e,blockType:"url",stories:[],viewType:"",numOfStories:5,numOfColumns:2,circleSize:96,orderby:"",order:"",archiveLinkLabel:"",authors:[],fieldState:{}}),save:Se,isEligible(e){let{url:t,blockType:r}=e;return Boolean(!r&&t&&t.trim().length)}},Ce],Te=window.wp.element,Le=window.wp.apiFetch,Ne=window.wp.components,Me=window.wp.viewport,Be=window.wp.data,Ae=window.wp.blockEditor,Oe=window.wp.url;const Ie=function LoaderContainer(e){let{children:t}=e;return y.createElement("div",{className:"web-stories-block__loader-container"},t,y.createElement(Ne.Spinner,null))},{config:{api:{stories:We}}}=window.webStoriesBlockSettings;const Pe=function FetchSelectedStories(e){let{icon:t,label:r,selectedStoryIds:o=[],setSelectedStories:i,setIsFetching:s}=e;const{createErrorNotice:l}=(0,Be.useDispatch)("core/notices");return(0,Te.useEffect)((()=>{(async()=>{try{const e=await Le({path:(0,Oe.addQueryArgs)(We,{_embed:"author,wp:featuredmedia",context:"edit",include:o,orderby:o.length>0?"include":void 0})});e.length&&i(e)}catch(e){l((0,E.sprintf)(
/* translators: %s: error message. */
(0,E.__)("Unable to load stories. %s","web-stories"),e?.message||""),{type:"snackbar"})}finally{s(!1)}})()}),[]),y.createElement(Ne.Placeholder,{icon:y.createElement(Ae.BlockIcon,{icon:t,showColors:!0}),label:r,className:"wp-block-web-stories-embed",instructions:!1},y.createElement(Ie,null,(0,E.__)("Loading Stories…","web-stories")))},Re=["image"],EmbedControls=e=>{const{switchBackToURLInput:t,width:r,height:o,minWidth:i,maxWidth:s,minHeight:l,maxHeight:n,poster:a,title:c,setAttributes:d}=e,u=`web-stories-embed-block__poster-image-description-${(0,S.useInstanceId)(EmbedControls,"web-stories-embed")}`,m=(0,Te.createRef)(),h=(0,Te.useCallback)((e=>{d({poster:e.url})}),[d]),p=(0,Te.useCallback)((()=>{d({poster:""}),m.current.focus()}),[d,m]),b=Boolean(a);return y.createElement(y.Fragment,null,y.createElement(Ae.BlockControls,null,y.createElement(Ne.ToolbarGroup,null,Ne.ToolbarButton?y.createElement(Ne.ToolbarButton,{onClick:t},(0,E.__)("Replace","web-stories")):y.createElement(Ne.Button,{className:"components-toolbar__control",title:(0,E.__)("Replace","web-stories"),onClick:t}))),y.createElement(Ae.InspectorControls,null,y.createElement(Ne.PanelBody,{title:(0,E.__)("Embed Settings","web-stories")},y.createElement(Ne.PanelRow,null,y.createElement(Ne.BaseControl,null,y.createElement(Ne.TextControl,{type:"text",className:"web-stories-embed-title-control",label:(0,E.__)("Title","web-stories"),value:c||"",onChange:e=>d({title:e})}))),y.createElement(Ae.MediaUploadCheck,null,y.createElement(Ne.PanelRow,null,y.createElement(Ne.BaseControl,null,y.createElement(Ne.BaseControl.VisualLabel,{className:"web-stories-embed-poster-label"},(0,E.__)("Poster image","web-stories")),b&&y.createElement("img",{src:a,alt:""}),y.createElement(Ae.MediaUpload,{title:(0,E.__)("Select poster image","web-stories"),onSelect:h,allowedTypes:Re,render:e=>{let{open:t}=e;return y.createElement(Ne.Button,{isPrimary:!0,onClick:t,ref:m,"aria-describedby":u},b?(0,E.__)("Replace","web-stories"):(0,E.__)("Select","web-stories"))}}),y.createElement("p",{id:u,hidden:!0},b?(0,E.sprintf)(
/* translators: %s: poster image URL. */
(0,E.__)("The current poster image url is %s","web-stories"),a):(0,E.__)("There is no poster image currently selected","web-stories")),b&&y.createElement(Ne.Button,{className:"web-stories-embed-poster-remove",onClick:p},(0,E.__)("Remove","web-stories"))))),y.createElement(Ne.PanelRow,null,y.createElement(Ne.BaseControl,{className:"web-stories-embed-size-control"},y.createElement(Ne.BaseControl.VisualLabel,null,(0,E.__)("Story dimensions","web-stories")),y.createElement("div",{className:"web-stories-embed-size-control__row"},y.createElement(Ne.TextControl,{type:"number",className:"web-stories-embed-size-control__width",label:(0,E.__)("Width","web-stories"),value:r||"",min:i,max:s,onChange:e=>d({width:parseInt(e)})}),y.createElement(Ne.TextControl,{type:"number",className:"web-stories-embed-size-control__height",label:(0,E.__)("Height","web-stories"),value:o||"",min:l,max:n,onChange:e=>d({height:parseInt(e)})})))))))},ze=EmbedControls,De=()=>y.createElement("div",{className:"wp-block-web-stories-embed is-loading"},y.createElement(Ne.Spinner,null),y.createElement("p",null,(0,E.__)("Embedding…","web-stories"))),Fe=window.lodash;function $e(e,t,r){const o=(0,Te.useMemo)((()=>(0,Fe.debounce)(e,t,r)),[e,t,r]);return(0,Te.useEffect)((()=>()=>o.cancel()),[o]),o}const je=window.wp.date;const He=function ItemOverlay(e){let{isSelected:t,story:r,addSelectedStory:o,removeSelectedStory:i}=e;const s=(0,Te.useCallback)((e=>{e.preventDefault(),t||o(r)}),[o,r,t]),l=(0,Te.useCallback)((e=>{e.preventDefault(),t?i(r):o(r)}),[i,o,r,t]);return y.createElement("button",{type:"button",className:t?"web-stories-story-preview-card__overlay item-selected":"web-stories-story-preview-card__overlay",onClick:s},t&&y.createElement("div",{className:"item-selected-icon"},y.createElement(Ne.Icon,{className:"item-selected-icon-check",icon:"saved"}),y.createElement(Ne.Icon,{className:"item-selected-icon-minus",icon:"minus",onClick:l}),y.createElement(Ne.VisuallyHidden,null,(0,E.__)("Deselect","web-stories"))))},Ve=()=>{};const Ue=function StoryPreview(e){let{story:t,isSelected:r,addSelectedStory:o=Ve,removeSelectedStory:i=Ve}=e;const s=(0,je.__experimentalGetSettings)().formats.date,l=(0,je.dateI18n)(s,t.created),n=(0,Te.useMemo)((()=>{if(!l)return null;switch(t.status){case"publish":return(0,E.sprintf)(
/* translators: %s: published date */
(0,E.__)("Published %s","web-stories"),l);case"future":return(0,E.sprintf)(
/* translators: %s: future publish date */
(0,E.__)("Scheduled %s","web-stories"),l);default:return(0,E.sprintf)(
/* translators: %s: last modified date */
(0,E.__)("Modified %s","web-stories"),l)}}),[t.status,l]);return y.createElement("div",{className:"web-stories-story-preview-card"},y.createElement("div",{className:"web-stories-story-preview-card__poster"},y.createElement(He,{isSelected:r,story:t,addSelectedStory:o,removeSelectedStory:i}),t._embedded?.["wp:featuredmedia"]?.[0]?.source_url&&y.createElement("img",{src:t._embedded?.["wp:featuredmedia"]?.[0]?.source_url,alt:"",width:640,height:853})),y.createElement("div",{className:"web-stories-story-preview-card__label"},y.createElement("div",{className:"web-stories-story-preview-card__title"},""===t.title.rendered?(0,E.__)("Untitled","web-stories"):t.title.rendered),t._embedded?.author?.[0]?.name&&y.createElement("div",null,t._embedded?.author?.[0]?.name),y.createElement("div",null,n)))},Ge=[{label:(0,E.__)("Name","web-stories"),value:"name"},{label:(0,E.__)("Date Created","web-stories"),value:"date"},{label:(0,E.__)("Last Modified","web-stories"),value:"modified"},{label:(0,E.__)("Created By","web-stories"),value:"author"}];function AuthorSearch(e){let{label:t,options:r,onFilterValueChange:o,onChange:i,value:s}=e;return Ne.ComboboxControl?y.createElement(Ne.ComboboxControl,{label:t,options:r,onFilterValueChange:o,onChange:i,value:s,className:"web-stories-story-picker-filter__combobox"}):y.createElement(Ne.SelectControl,{label:t,options:r,onChange:i,value:s})}function KeywordSearch(e){let{label:t,options:r,onFilterValueChange:o,onChange:i,value:s}=e;return Ne.ComboboxControl?y.createElement(Ne.ComboboxControl,{label:t,options:r,onFilterValueChange:o,onChange:i,value:s,className:"web-stories-story-picker-filter__combobox"}):y.createElement(Ne.TextControl,{label:t,value:s,onChange:i})}const Ze=function SelectStories(e){let{stories:t=[],selectedStories:r=[],setSelectedStories:o,hasAllStories:i,isLoading:s,fetchStories:l,maxNumOfStories:n}=e;const[a,c]=(0,Te.useState)([]),[d,u]=(0,Te.useState)(""),[m,h]=(0,Te.useState)(""),[p,b]=(0,Te.useState)("desc"),[w,g]=(0,Te.useState)("modified"),f=(0,Te.useRef)(1),{authors:_}=(0,Be.useSelect)((e=>{const t={search:m},{getAuthors:r}=e("core");return{authors:r(t)}}),[m]),v=(0,Te.useCallback)((()=>{l({author:a?.id||void 0,search:d||void 0,order:p,orderBy:w,page:f.current})}),[d,a,l,p,w]);(0,Te.useEffect)((()=>{f.current=1,v()}),[d,a,p,w,v]);const S=(0,Te.useCallback)((()=>{f.current++,v()}),[v]),k=$e((e=>{u(e)}),300),C=$e((e=>{h(e),c(""===e?null:_.find((t=>t.id===Number(e))))}),300),x=(0,Te.useCallback)((e=>{c(""===e?null:_.find((t=>t.id===Number(e))))}),[_,c]),T=(0,Te.useCallback)((e=>{g(e),b(["title","author"].includes(e)?"asc":"desc")}),[b,g]),L=(0,Te.useMemo)((()=>_.filter((e=>{let{name:t}=e;return Boolean(t?.trim().length)})).map((e=>{let{id:t,name:r}=e;return{label:r,value:t}}))),[_]),N=(0,Te.useMemo)((()=>t.filter((e=>{let{title:t}=e;return Boolean(t?.rendered?.trim()?.length)})).map((e=>{let{id:t,title:r}=e;return{label:r.rendered,value:t}}))),[t]),M=(0,Te.useMemo)((()=>r.map((e=>e.id))),[r]),B=(0,Te.useCallback)((e=>{M.includes(e.id)||(1!==n?r.length>=n||o([...r,e]):o([e]))}),[o,r,M,n]),A=(0,Te.useCallback)((e=>{o(r.filter((t=>t.id!==e.id)))}),[r,o]);return y.createElement(y.Fragment,null,y.createElement("div",{className:"web-stories-story-picker-filter"},y.createElement("div",{className:"web-stories-story-picker-filter__search-container"},y.createElement("div",{className:"web-stories-story-picker-filter__search-inner"},y.createElement(KeywordSearch,{label:(0,E.__)("Search Stories","web-stories"),options:N,onFilterValueChange:k,onChange:k,value:d})),y.createElement(AuthorSearch,{label:(0,E.__)("Search by Author","web-stories"),options:L,onFilterValueChange:C,onChange:x,value:a?.id}),y.createElement("div",null,y.createElement(Ne.SelectControl,{label:(0,E.__)("Sort","web-stories"),options:Ge,value:w,onChange:T})))),!t.length&&d&&y.createElement("p",null,(0,E.sprintf)(
/* translators: %s: search term. */
(0,E.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),d)),!t.length&&!d&&y.createElement("p",null,(0,E.__)("Sorry, we couldn't find any results","web-stories")),t.length>=1&&y.createElement("div",{role:"list","aria-label":(0,E.__)("Viewing Stories","web-stories"),className:"web-stories-story-picker-filter__grid"},t.map((e=>{const t=M.includes(e.id);return y.createElement("div",{key:e.id,role:"listitem",className:"web-stories-story-picker-filter__grid_item"},y.createElement(Ue,{story:e,isSelected:t,addSelectedStory:B,removeSelectedStory:A}))}))),y.createElement("div",{className:"web-stories-story-picker-filter__load_more"},s&&y.createElement(Ne.Spinner,null),!i&&t.length>0&&!s&&y.createElement(Ne.Button,{variant:"primary",className:"is-primary",onClick:S},(0,E.__)("Load More","web-stories"))))};const qe=function SortStories(e){let{selectedStories:t,setSelectedStories:r}=e;const[o,i]=(0,Te.useState)(),[s,l]=(0,Te.useState)(),n=(0,Te.useCallback)(((e,o)=>{const i=t.map((e=>e.id));i.splice(o,0,i.splice(e,1).pop()),r(i.map((e=>t.find((t=>t.id===e)))))}),[t,r]),a=function(e,t,r){const o=(0,Te.useMemo)((()=>(0,Fe.throttle)(e,t,r)),[e,t,r]);return(0,Te.useEffect)((()=>()=>o.cancel()),[o]),o}(((e,t)=>{e.preventDefault(),t.classList.add("web-stories-story-picker-show-drag-inserter");const r=t.getBoundingClientRect();Math.abs(e.clientX-r.x)>Math.abs(e.clientX-(r.x+r.width))?t.classList.add("web-stories-story-picker-show-drag-inserter-right"):t.classList.remove("web-stories-story-picker-show-drag-inserter-right");const o=Number(t.children[0].dataset.order);i(o)}));return y.createElement("div",{role:"list","aria-label":(0,E.__)("Sorting Stories","web-stories"),className:"web-stories-story-picker-filter__grid"},t.map(((e,r)=>y.createElement("div",{key:e.id,onDragOver:e=>{a(e,e.currentTarget)},onDragLeave:e=>{e.preventDefault(),a.cancel();e.target.closest(".droppable").classList.remove("web-stories-story-picker-show-drag-inserter","web-stories-story-picker-show-drag-inserter-right")},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),a.cancel(),s){const e=t.findIndex((e=>e.id===s));n(e,o)}e.target.closest(".droppable").classList.remove("web-stories-story-picker-show-drag-inserter","web-stories-story-picker-show-drag-inserter-right")},className:"droppable"},y.createElement("div",{"data-order":r,id:`draggable-story-${e.id}`},y.createElement(Ne.Draggable,{elementId:`draggable-story-${e.id}`},(t=>{let{onDraggableStart:o,onDraggableEnd:i}=t;return y.createElement("div",{key:e.id,role:"listitem",className:"web-stories-story-picker-filter__grid_item",onDragStart:t=>{l(e.id),o(t)},onDragEnd:e=>{i(e)},"data-order":r,draggable:!0},y.createElement(Ue,{story:e}))})))))))},{config:{api:{stories:Qe}}}=window.webStoriesBlockSettings;const Xe=function StoryPicker(e){let{selectedStories:t,setSelectedStories:r,closeStoryPicker:o,isSortingStories:i=!1,setIsSortingStories:s=(()=>{}),maxNumOfStories:l}=e;const{createErrorNotice:n}=(0,Be.useDispatch)("core/notices"),[a,c]=(0,Te.useState)(t),[d,u]=(0,Te.useState)(!0),[m,h]=(0,Te.useState)("idle"),[p,b]=(0,Te.useState)([]),[w,g]=(0,Te.useState)([]),f=(0,Te.useCallback)((()=>{o(),r(a)}),[o,r,a]),_=(0,Te.useCallback)((async function(){let{orderby:e="modified",order:t="desc",search:r,author:o,page:i=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s={_embed:"author,wp:featuredmedia",context:"edit",_web_stories_envelope:!0,search:r,author:o,page:i,per_page:10,orderby:e,order:t,status:"publish"};try{h("loading");const e=await Le({path:(0,Oe.addQueryArgs)(Qe,s)}),t=Number(e?.headers?.["X-WP-TotalPages"]);g(i===t),b((t=>1===i?e.body:[...t,...e.body]))}catch(e){h("error"),n((0,E.__)("Unable to load stories","web-stories"),{type:"snackbar"})}finally{h("idle"),u(!1)}}),[n]);(0,Te.useEffect)((()=>{d&&_()}),[d,_]);const v=1===l?(0,E.__)("Selected Story","web-stories"):(0,E.__)("Selected Stories","web-stories");return y.createElement(Ne.Modal,{title:v,onRequestClose:o,shouldCloseOnClickOutside:!1,className:"web-stories-story-picker-modal"},y.createElement("div",{className:"web-stories-story-picker-modal__content"},d?y.createElement(Ie,null,(0,E.__)("Loading Stories…","web-stories")):i?y.createElement(qe,{selectedStories:a,setSelectedStories:c}):y.createElement(Ze,{stories:p,selectedStories:a,setSelectedStories:c,hasAllStories:w,fetchStories:_,maxNumOfStories:l,isLoading:"loading"===m})),y.createElement("div",{className:"web-stories-story-picker-modal__footer"},y.createElement("div",{className:"web-stories-story-picker-modal__footer--left"},!i&&!d&&l>1&&y.createElement("p",null,(0,E.sprintf)(
/* translators: %1$d: Number of selected stories, %2$d: Maximum allowed stories */
(0,E._n)("%1$d of %2$d story selected","%1$d of %2$d stories selected",l,"web-stories"),a.length,l))),y.createElement("div",{className:"web-stories-story-picker-modal__footer--right"},l>1&&(i?y.createElement(Ne.Button,{onClick:()=>s(!1)},(0,E.__)("Select Stories","web-stories")):y.createElement(Ne.Button,{onClick:()=>s(!0),disabled:a.length<2},(0,E.__)("Rearrange Stories","web-stories"))),y.createElement(Ne.Button,{isPrimary:!0,disabled:!a.length,onClick:f},(0,E.__)("Update","web-stories")))))},Ke=window.wp.primitives,Je=(0,Te.createElement)(Ke.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,Te.createElement)(Ke.Path,{d:"M6.734 16.106l2.176-2.38-1.093-1.028-3.846 4.158 3.846 4.157 1.093-1.027-2.176-2.38h2.811c1.125 0 2.25.03 3.374 0 1.428-.001 3.362-.25 4.963-1.277 1.66-1.065 2.868-2.906 2.868-5.859 0-2.479-1.327-4.896-3.65-5.93-1.82-.813-3.044-.8-4.806-.788l-.567.002v1.5c.184 0 .368 0 .553-.002 1.82-.007 2.704-.014 4.21.657 1.854.827 2.76 2.657 2.76 4.561 0 2.472-.973 3.824-2.178 4.596-1.258.807-2.864 1.04-4.163 1.04h-.02c-1.115.03-2.229 0-3.344 0H6.734z"})),Ye=e=>{let{url:t,onChange:r,onSubmit:o,onClose:i}=e;return y.createElement(Ae.URLPopover,{onClose:i},y.createElement("form",{className:"block-editor-media-placeholder__url-input-form","data-testid":"embed-placeholder-form",onSubmit:o},y.createElement("input",{className:"block-editor-media-placeholder__url-input-field",type:"url","aria-label":(0,E.__)("Story URL","web-stories"),placeholder:(0,E.__)("Paste or type URL","web-stories"),onChange:r,value:t}),y.createElement(Ne.Button,{className:"block-editor-media-placeholder__url-input-submit-button",icon:Je,label:(0,E.__)("Embed","web-stories"),type:"submit"})))},EmbedPlaceholder=e=>{let{icon:t,label:r,value:o,onSubmit:i,cannotEmbed:s,errorMessage:l,selectedStories:n=[],setSelectedStories:a}=e;const[c,d]=(0,Te.useState)(o),[u,m]=(0,Te.useState)(!1),[h,p]=(0,Te.useState)(!1),b=(0,Te.useCallback)((()=>{p(!1)}),[]),w=()=>m(!1),g=n.length>0;return y.createElement(y.Fragment,null,y.createElement(Ne.Placeholder,{icon:y.createElement(Ae.BlockIcon,{icon:t,showColors:!0}),label:r,className:"wp-block-web-stories-embed",instructions:(0,E.__)("Select an existing story from your site, or add one with a URL.","web-stories")},y.createElement(y.Fragment,null,y.createElement(Ne.Button,{isPrimary:!0,onClick:()=>p(!0)},g?(0,E.__)("Replace Story","web-stories"):(0,E.__)("Select Story","web-stories")),y.createElement("div",{className:"block-editor-media-placeholder__url-input-container"},y.createElement(Ne.Button,{className:"block-editor-media-placeholder__button",onClick:()=>m(!0),isPressed:u,variant:"tertiary"},!g&&o?(0,E.__)("Replace URL","web-stories"):(0,E.__)("Insert from URL","web-stories")),u&&y.createElement(Ye,{url:c,onChange:e=>{d(e.target.value)},onSubmit:e=>{e.preventDefault(),w(),i(c)},onClose:w}))),s&&y.createElement("div",{className:"components-placeholder__error"},y.createElement("div",{className:"components-placeholder__instructions"},(0,E.__)("Sorry, this content could not be embedded.","web-stories"),l&&y.createElement(y.Fragment,null," ",(0,E.sprintf)(
/* translators: %s: error message. */
(0,E.__)("Reason: %s.","web-stories"),l))))),h&&y.createElement(Xe,{closeStoryPicker:b,maxNumOfStories:1,selectedStories:n,setSelectedStories:a}))};EmbedPlaceholder.defaultProps={cannotEmbed:!1};const et=EmbedPlaceholder;const tt=(0,Te.forwardRef)((function StoryPlayer(e,t){let{url:r,title:o,poster:i,width:s,height:l}=e;return y.createElement("amp-story-player",{ref:t,style:{width:s?`${s}px`:void 0,height:l?`${l}px`:void 0},"data-testid":"amp-story-player"},y.createElement("a",{href:r},i?y.createElement("img",{alt:o,src:i,width:s,height:l,"data-amp-story-player-poster-img":!0}):o))}));const rt=(0,Te.forwardRef)((function EmbedPreview(e,t){let{url:r,title:o,poster:i,isSelected:s,width:l,height:n}=e;const[a,c]=(0,Te.useState)(!1);(0,Te.useEffect)((()=>{!s&&a&&c(!1)}),[s,a,c]);const d=(0,Te.useCallback)((()=>c(!0)),[c]);return y.createElement("div",{className:"web-stories-embed-preview wp-block-embed__wrapper",style:{"--aspect-ratio":0!==l?n/l:1,"--width":`${l}px`,"--height":`${n}px`}},y.createElement(tt,{url:r,title:o,poster:i,ref:t,onFocus:d}),!a&&y.createElement("div",{className:"web-stories-embed-preview-overlay","data-testid":"embed-preview-overlay",onMouseUp:d}))}));const ot=(0,Me.withViewportMatch)({_isResizable:"medium"})((function StoryEmbedEdit(e){let{attributes:t,setAttributes:r,className:o,isSelected:i,_isResizable:s}=e;const{url:l="",width:n=360,height:a=600,align:c="none",poster:d,title:u,stories:m=[]}=t,[h,p]=(0,Te.useState)(!1),[b,w]=(0,Te.useState)(l),[g,f]=(0,Te.useState)(!1),[v,k]=(0,Te.useState)(!1),[C,x]=(0,Te.useState)({}),[T,L]=(0,Te.useState)(!1),[N,M]=(0,Te.useState)(m),[B,A]=(0,Te.useState)([]),O=g,I=!b||!l||h||T,W=S.useViewportMatch?S.useViewportMatch("medium"):s,P=(0,Te.useRef)();(0,Te.useEffect)((()=>{t.stories.toString()!==N.toString()&&r({stories:N})}),[t.stories,r,N]),(0,Te.useEffect)((()=>{N.length&&!B.length&&k(!0)}),[N,B,k]),(0,Te.useEffect)((()=>{w(l),_("story_embedded")}),[l]),(0,Te.useEffect)((()=>{_("story_poster_changed")}),[d]),(0,Te.useEffect)((()=>{if(P.current&&window.AmpStoryPlayer){new window.AmpStoryPlayer(window,P.current).load()}}),[O,I,W]);const R=(0,Te.useCallback)((async e=>{if(e)try{f(!0);const t=encodeURIComponent(new URL(e).toString()),o=await Le({path:`web-stories/v1/embed?url=${t}`});L(!("string"==typeof o?.title)),x(o),r({url:e})}catch(e){e instanceof TypeError||x(e),L(!0)}finally{f(!1)}}),[r]);(0,Te.useEffect)((()=>{(C?.title||C?.poster)&&r({title:C?.title,poster:C?.poster})}),[l,r,C?.title,C?.poster]);const z=(0,Te.useCallback)((e=>{A(e),M(e.map((e=>e.id)));const t=e?.[0],o=t?.link;x({title:t?.title?.rendered,poster:t?._embedded?.["wp:featuredmedia"]?.[0]?.source_url}),w(o),p(!1),L(!1),r({url:o})}),[A,r]),D=(0,Te.useCallback)((e=>{A([]),M([]),p(!1),L(!1),w(e),e!==l&&R(e)}),[l,R]),F=(0,Te.useCallback)((()=>{p(!0)}),[]),{isRTL:$,maxWidth:j}=(0,Be.useSelect)((e=>{const{getSettings:t}=e("core/block-editor"),r=t();return{isRTL:r.isRTL,maxWidth:r.maxWidth}}),[]),{toggleSelection:H}=(0,Be.useDispatch)("core/block-editor");if(O)return y.createElement(De,null);const V=(0,E.__)("Single Story","web-stories");if(I)return v?y.createElement(Pe,{icon:y.createElement(BlockIcon,null),label:V,selectedStoryIds:N,setSelectedStories:A,setIsFetching:k}):y.createElement(et,{icon:y.createElement(BlockIcon,null),label:V,value:b,onSubmit:D,cannotEmbed:T,errorMessage:C?.message,selectedStories:B,setSelectedStories:z});const U=n/a,G=n<a?20:20*U,Z=a<n?20:20/U;if(!W)return y.createElement(y.Fragment,null,y.createElement(ze,{switchBackToURLInput:F,poster:d,title:u,setAttributes:r,width:n,height:a,minWidth:Math.ceil(G),maxWidth:Math.floor(j),minHeight:Math.floor(Z),maxHeight:Math.ceil(j/U)}),y.createElement("div",{className:`${o} web-stories-embed align${c}`},y.createElement(rt,{url:l,title:u,poster:d,ref:P,isSelected:i,width:n,height:a})));const q="center"===c||"none"===c||"right"===c&&$||"left"===c&&!$,Q="center"===c||"left"===c&&$||"right"===c&&!$;return y.createElement(y.Fragment,null,y.createElement(ze,{switchBackToURLInput:F,poster:d,title:u,setAttributes:r,width:n,height:a,minWidth:Math.ceil(G),maxWidth:Math.floor(j),minHeight:Math.floor(Z),maxHeight:Math.ceil(j/U)}),y.createElement("div",{className:`${o} web-stories-embed align${c}`},y.createElement(Ne.ResizableBox,{className:i?"show-resize-handle":"hide-resize-handle",size:{width:n,height:a},minWidth:G,maxWidth:j,minHeight:Z,maxHeight:j/U,lockAspectRatio:!0,enable:{top:!1,right:q,bottom:!0,left:Q},onResizeStart:()=>H(!1),onResizeStop:(e,t,o,i)=>{H(!0),r({width:parseInt(n+i.width),height:parseInt(a+i.height)})}},y.createElement(rt,{url:l,title:u,poster:d,ref:P,isSelected:i,width:n,height:a}))))})),it="latest-stories",st="selected-stories",lt="url",nt=[{id:it,label:(0,E.__)("Latest Stories","web-stories"),description:(0,E.__)("Embed latest web stories.","web-stories"),icon:me},{id:st,label:(0,E.__)("Selected Stories","web-stories"),description:(0,E.__)("Manually select web stories.","web-stories"),icon:he},{id:lt,label:(0,E.__)("Single Story","web-stories"),description:(0,E.__)("Embed a single story.","web-stories"),icon:pe}],at="grid",ct="list",dt="circles",ut="carousel",mt=[{id:ut,label:(0,E.__)("Box Carousel","web-stories"),icon:be,panelIcon:_e},{id:dt,label:(0,E.__)("Circle Carousel","web-stories"),icon:we,panelIcon:ye},{id:at,label:(0,E.__)("Grid","web-stories"),icon:ge,panelIcon:Ee},{id:ct,label:(0,E.__)("List","web-stories"),icon:fe,panelIcon:ve}];const ht=function BlockTypeSwitcher(e){let{selectedBlockType:t,setAttributes:r}=e;const o=Ne.ToolbarGroup?Ne.ToolbarGroup:Ne.Toolbar;return y.createElement(o,null,Ne.ToolbarItem?y.createElement(Ne.ToolbarItem,null,(e=>y.createElement(Ne.DropdownMenu,{icon:"update",toggleProps:e,label:(0,E.__)("Change Type","web-stories"),controls:nt.filter((e=>e.id!==t)).map((e=>({title:e.label,onClick:()=>r({blockType:e.id})})))}))):y.createElement(Ne.DropdownMenu,{icon:"update",label:(0,E.__)("Change Type","web-stories"),controls:nt.filter((e=>e.id!==t)).map((e=>({title:e.label,onClick:()=>r({blockType:e.id})})))}))},pt=e=>{let{blockType:t,viewType:r,setAttributes:o}=e;const i=Ne.ToolbarGroup?Ne.ToolbarGroup:Ne.Toolbar;return y.createElement(Ae.BlockControls,null,y.createElement(i,null,t&&lt!==t&&y.createElement(Te.Fragment,null,mt.map((e=>Ne.ToolbarButton?y.createElement(Ne.ToolbarButton,{key:e.id,label:e.label,icon:e.icon,onClick:()=>{o({viewType:e.id})},isPressed:e.id===r}):y.createElement(Ne.Button,{key:e.id,label:e.label,icon:e.icon,onClick:()=>{o({viewType:e.id})},isPressed:e.id===r}))))),y.createElement(ht,{selectedBlockType:t,setAttributes:o}))};const bt=function BlockConfigurationPanel(e){let{instructions:t,icon:r,setAttributes:o,selectionOptions:i,selectionType:s}=e;const l=(0,E.__)("Web Stories","web-stories");return y.createElement(Ne.Placeholder,{icon:y.createElement(Ae.BlockIcon,{icon:r,showColors:!0}),label:l,instructions:t,className:"web-stories-block-configuration-panel"},y.createElement("ul",{className:"web-stories-block-configuration-panel__options",role:"list","aria-label":(0,E.__)("Block Types","web-stories")},i.map((e=>y.createElement("li",{key:e.id},y.createElement(Ne.Button,{variant:"secondary",isSecondary:!0,onClick:()=>{o({[s]:e.id})},icon:y.createElement(Ne.Icon,{icon:e.panelIcon||e.icon,title:e.label}),label:e.description||e.label}),y.createElement("span",{className:"web-stories-block-configuration-panel__label components-placeholder__instructions",role:"presentation"},e.label))))))},wt=e=>{let{label:t,value:r,onChange:o,onInputChange:i,placeholder:s,options:l=[]}=e;return Array.isArray(l)&&y.createElement("div",{className:"components-base-control"},y.createElement(Ne.FormTokenField,{value:r,suggestions:l,onChange:o,onInputChange:i,maxSuggestions:100,label:t,placeholder:s}))},gt=e=>{let{authors:t,setAttributes:r}=e;const[o,i]=(0,Te.useState)(!1),[s,l]=(0,Te.useState)([]),[n,a]=(0,Te.useState)([]);(0,Te.useEffect)((()=>{!o&&t?.length&&Le({path:(0,Oe.addQueryArgs)("/wp/v2/users",{per_page:100,include:t.join(",")})}).then((e=>{void 0!==e&&Array.isArray(e)&&l(e.map((e=>{let{id:t,name:r}=e;return{id:t,value:r}})))})).catch((()=>{l([])})).finally((()=>i(!0)))}),[o,t]);const c=$e((e=>{Le({path:(0,Oe.addQueryArgs)("/wp/v2/users",{per_page:100,search:e})}).then((e=>{void 0!==e&&Array.isArray(e)&&a(e.map((e=>{let{id:t,name:r}=e;return{id:t,value:r}})))})).catch((()=>{a([])}))}),500);return y.createElement(wt,{label:(0,E.__)("Authors","web-stories"),value:s.map((e=>{let{value:t}=e;return t})),options:n.map((e=>{let{value:t}=e;return t})),onChange:e=>{if(void 0===e||!Array.isArray(e))return;const t=e.map((e=>[...n,...s].find((t=>{let{value:r}=t;return r===e})))).filter(Boolean);l(t),r({authors:t.map((e=>{let{id:t}=e;return t}))})},onInputChange:c})},{config:{fieldStates:ft,archiveURL:_t}}=window.webStoriesBlockSettings,vt=e=>{const{attributes:{viewType:t,numOfStories:r,numOfColumns:o,order:i,orderby:s,archiveLinkLabel:l,authors:n,circleSize:a,imageAlignment:c,fieldState:d},setAttributes:u,showFilters:m=!0}=e,h=(0,Te.useRef)(!0);(0,Te.useEffect)((()=>{const e={};Object.entries(ft[t]).map((t=>{let[r,o]=t;const{show:i}=o;void 0===d[`show_${r}`]&&(e[`show_${r}`]=i)})),Object.keys(e).length&&u({fieldState:{...d,...e}})}),[]),(0,Te.useEffect)((()=>{if(h.current)return void(h.current=!1);const e={};Object.entries(ft[t]).map((t=>{let[r,o]=t;const{show:i}=o;e[`show_${r}`]=i})),u({fieldState:e})}),[t]);const ArchiveLink=()=>_t?y.createElement("a",{target:"__blank",href:_t},(0,E.__)("View archive page","web-stories")):null;return y.createElement(Ae.InspectorControls,null,y.createElement(Ne.PanelBody,{className:"web-stories-settings",title:(0,E.__)("Layout Options","web-stories")},ft[t]&&Object.entries(ft[t]).map((e=>{let[t,r]=e;const{label:o,hidden:i}=r;return!i&&"circle_size"!==t&&"image_alignment"!==t&&y.createElement(Ne.ToggleControl,{key:`${t}__control`,label:o,checked:d[`show_${t}`]||!1,onChange:()=>(e=>{u({fieldState:{...d,[`show_${e}`]:!d[`show_${e}`]}})})(t),help:"archive_link"===t&&d[`show_${t}`]&&y.createElement(ArchiveLink,null)})})),d.show_archive_link&&_t&&y.createElement(Ne.TextControl,{label:(0,E.__)("Archive Link Label","web-stories"),value:l,placeholder:(0,E.__)("View All Stories","web-stories"),onChange:e=>u({archiveLinkLabel:e}),className:"web-stories-settings-archive-link"})),[dt,at,ct].includes(t)&&y.createElement(Ne.PanelBody,{className:"web-stories-settings",title:(0,E.__)("Layout and Style Options","web-stories")},ct===t&&y.createElement(Ne.RadioControl,{label:(0,E.__)("Image Alignment","web-stories"),selected:c,options:[{value:"left",label:(0,E.__)("Left","web-stories")},{value:"right",label:(0,E.__)("Right","web-stories")}],onChange:e=>{u({imageAlignment:e})}}),at===t&&y.createElement(Ne.RangeControl,{label:(0,E.__)("Number of Columns","web-stories"),value:o,onChange:e=>u({numOfColumns:e}),min:1,max:4,step:1}),dt===t&&y.createElement(Ne.RangeControl,{label:(0,E.__)("Circle Size","web-stories"),value:a,onChange:e=>u({circleSize:e}),min:80,max:200,step:5})),m&&y.createElement(Ne.PanelBody,{title:(0,E.__)("Sorting and Filtering","web-stories")},y.createElement(Ne.SelectControl,{label:(0,E.__)("Order By","web-stories"),options:[{value:"date",label:(0,E.__)("Date","web-stories")},{value:"title",label:(0,E.__)("Title","web-stories")}],value:s||"date",onChange:e=>u({orderby:e})}),y.createElement(Ne.SelectControl,{label:(0,E.__)("Order","web-stories"),options:[{value:"asc",label:(0,E.__)("Ascending","web-stories")},{value:"desc",label:(0,E.__)("Descending","web-stories")}],value:i||"desc",onChange:e=>u({order:e})}),y.createElement(gt,{authors:n,setAttributes:u}),y.createElement(Ne.RangeControl,{label:(0,E.__)("Number of Stories","web-stories"),value:r,onChange:e=>u({numOfStories:e}),min:1,max:20,step:1})))},yt=()=>y.createElement(Ne.Placeholder,{className:"web-stories-placeholder",instructions:(0,E.__)("Loading Stories…","web-stories")},y.createElement(Ne.Spinner,null));var Et=__webpack_require__(184),St=__webpack_require__(474);St.prototype.scrollItem=function(e,t,r){if(void 0===r&&t?.target&&(r=t,t=!1),void 0===r)return!1;if(r&&r.preventDefault(),this.opt.slidesToScroll=Math.max(1,this.opt.slidesToScroll),this.opt.slidesToShow=Math.max(1,this.opt.slidesToShow),this.itemWidth===1/0){const e=r.target.parentElement.querySelector(".web-stories-list__carousel"),t=window.getComputedStyle(e.querySelector(".web-stories-list__story"));this.itemWidth=parseFloat(t.width)+(parseFloat(t.marginLeft)+parseFloat(t.marginRight))}const o=e;if(++this.animate_id,!0===t)e*=this.containerWidth,e=Math.round(e/this.itemWidth)*this.itemWidth;else{if("string"==typeof e){const t="prev"===e;if(e=this.opt.slidesToScroll%1||this.opt.slidesToShow%1?this.getCurrentSlide():isNaN(this.slide)?0:this.slide,t?e-=this.opt.slidesToScroll:e+=this.opt.slidesToScroll,this.opt.rewind){const r=this.ele.scrollLeft;e=t&&!r?this.slides.length:!t&&r+this.containerWidth>=Math.floor(this.trackWidth)?0:e}}e=Math.min(e,this.slides.length),this.slide=e,e=this.itemWidth*e}return this.scrollTo(e,this.opt.duration*Math.abs(this.ele.scrollLeft-e),(function(){this.updateControls(),this.emit("animated",{value:o,type:"string"==typeof o?"arrow":t?"dot":"slide"})})),!1};const kt=St;const Ct=function StoryCard(e){let{title:t,excerpt:r,poster:o,author:i,date:s,isShowingAuthor:l,isShowingDate:n,isShowingTitle:a,isShowingExcerpt:c,imageAlignment:d}=e;const u=Et("web-stories-list__story",{"image-align-right":"right"===d}),m=a||l||n,h=(0,je.__experimentalGetSettings)().formats.date;return y.createElement("div",{className:u},y.createElement("div",{className:"web-stories-list__story-poster"},o?y.createElement("img",{src:o,alt:t}):y.createElement("div",{className:"web-stories-list__story-poster-placeholder"},y.createElement("span",null,t))),m&&y.createElement("div",{className:"story-content-overlay web-stories-list__story-content-overlay"},a&&t&&y.createElement(Te.RawHTML,{className:"story-content-overlay__title"},t),c&&r&&y.createElement(Te.RawHTML,{className:"story-content-overlay__excerpt"},r),l&&y.createElement("div",{className:"story-content-overlay__author"},(0,E.sprintf)(
/* translators: byline. %s: author name. */
(0,E.__)("By %s","web-stories"),i)),n&&y.createElement("time",{dateTime:(0,je.format)("c",s),className:"story-content-overlay__date"},(0,E.sprintf)(
/* translators: %s: publish date. */
(0,E.__)("On %s","web-stories"),(0,je.dateI18n)(h,s)))))},{config:{archiveURL:xt}}=window.webStoriesBlockSettings;const Tt=function StoriesPreview(e){const{attributes:{align:t,viewType:r,circleSize:o,imageAlignment:i,fieldState:s,numOfColumns:l},viewAllLabel:n,stories:a}=e,c=(0,Te.useRef)(null),d=(0,Te.useRef)(null),u=(0,Te.useRef)(null),m=Et({"is-style-default":!s.show_sharp_corners,"is-style-squared":s.show_sharp_corners,"is-carousel":dt===r||ut===r,[`is-view-type-${r}`]:r,[`columns-${l}`]:at===r&&l,[`align${t}`]:t,"has-archive-link":s.show_archive_link},"web-stories-list"),StoriesLoop=()=>a.map((e=>y.createElement(Ct,{key:e.id,url:e.link,title:e.title.rendered,excerpt:e.excerpt.rendered?e.excerpt.rendered:"",date:e.date_gmt,author:e._embedded.author[0].name,poster:e._embedded?.["wp:featuredmedia"]?.[0]?.source_url,imageAlignment:i,isShowingAuthor:s.show_author,isShowingDate:s.show_date,isShowingTitle:s.show_title,isShowingExcerpt:s.show_excerpt,circleSize:o})));return(0,Te.useEffect)((()=>{if(!c.current)return;const e=c.current.querySelector(".web-stories-list__story");if(!e)return;const t=window.getComputedStyle(e),r=parseFloat(t.width)+(parseFloat(t.marginLeft)+parseFloat(t.marginRight)),o=new kt(c.current,{slidesToShow:"auto",slidesToScroll:"auto",itemWidth:r,duration:.25,skipTrack:!0,scrollLock:!0,arrows:{prev:u.current,next:d.current}});o.resize();const i=r*a.length;o.trackWidth=i,o.track.style.width=`${i}px`}),[a.length,r,o]),y.createElement("div",{className:m,style:{"--ws-circle-size":"circles"===r&&o?`${o}px`:void 0}},y.createElement("div",{className:"web-stories-list__inner-wrapper"},dt===r||ut===r?y.createElement(y.Fragment,null,y.createElement("div",{className:"web-stories-list__carousel",ref:c},y.createElement("div",{className:"glider-track"},y.createElement(StoriesLoop,null))),y.createElement("div",{"aria-label":(0,E.__)("Previous","web-stories"),className:"glider-prev",ref:u}),y.createElement("div",{"aria-label":(0,E.__)("Next","web-stories"),className:"glider-next",ref:d})):y.createElement(StoriesLoop,null)),s.show_archive_link&&xt&&y.createElement("div",{className:"web-stories-list__archive-link"},y.createElement("a",{target:"__blank",href:xt},n)))},{config:{api:{stories:Lt}}}=window.webStoriesBlockSettings;const Nt=function LatestStoriesEdit(e){let{attributes:t,setAttributes:r}=e;const{numOfStories:o,order:i,orderby:s,archiveLinkLabel:l,authors:n}=t,[a,c]=(0,Te.useState)([]),[d,u]=(0,Te.useState)([]),m=$e((0,Te.useCallback)((async e=>{try{u(!0);const t=await Le({path:(0,Oe.addQueryArgs)(Lt,{per_page:20,_embed:"author,wp:featuredmedia",orderby:e.orderby||"modified",order:e.order||"desc",author:e.author||void 0})});Array.isArray(t)&&c(t)}catch(e){c([])}finally{u(!1)}}),[]),1e3);(0,Te.useEffect)((()=>{m({order:i||"desc",orderby:s||"date",author:n})}),[n,o,i,s,m]);const h=l||(0,E.__)("View All Stories","web-stories"),p=a.length>o?a.slice(0,o):a;return y.createElement(y.Fragment,null,y.createElement(vt,{attributes:t,setAttributes:r}),d&&y.createElement(yt,null),!d&&Boolean(p?.length)&&y.createElement(Tt,{attributes:t,stories:p,viewAllLabel:h}),!d&&!p?.length&&y.createElement(Ne.Placeholder,{icon:y.createElement(Ae.BlockIcon,{icon:y.createElement(BlockIcon,null),showColors:!0}),label:(0,E.__)("Latest Stories","web-stories"),className:"wp-block-web-stories-embed",instructions:(0,E.__)("No stories found.","web-stories")},y.createElement(Ne.Button,{href:(0,Oe.addQueryArgs)("post-new.php",{post_type:"web-story"}),isLink:!0},(0,E.__)("Create New Story","web-stories"))))},{config:{maxNumOfStories:Mt}}=window.webStoriesBlockSettings,Bt=e=>{let{icon:t,label:r,selectedStories:o,setSelectedStories:i}=e;const[s,l]=(0,Te.useState)(!1),[n,a]=(0,Te.useState)(!1),c=()=>l(!0),d=(0,Te.useCallback)((()=>{l(!1),a(!1)}),[]),u=(0,Te.useCallback)((()=>{a(!0),c()}),[]);return y.createElement(y.Fragment,null,y.createElement(Ae.BlockControls,{group:"other"},Boolean(o?.length)&&(Ne.ToolbarButton?y.createElement(y.Fragment,null,y.createElement(Ne.ToolbarButton,{"aria-expanded":s,"aria-haspopup":"true",onClick:c},(0,E.__)("Select","web-stories")),y.createElement(Ne.ToolbarButton,{"aria-expanded":s,"aria-haspopup":"true",onClick:u},(0,E.__)("Rearrange","web-stories"))):y.createElement(y.Fragment,null,y.createElement(Ne.Button,{className:"components-toolbar__control",title:(0,E.__)("Select","web-stories"),"aria-expanded":s,"aria-haspopup":"true",onClick:c}),y.createElement(Ne.Button,{className:"components-toolbar__control",title:(0,E.__)("Rearrange","web-stories"),"aria-expanded":u,"aria-haspopup":"true",onClick:u})))),0===o.length&&y.createElement(Ne.Placeholder,{icon:y.createElement(Ae.BlockIcon,{icon:t,showColors:!0}),label:r,className:"wp-block-web-stories-embed",instructions:(0,E.__)("Select the web stories you want to display on your site.","web-stories")},y.createElement(Ne.Button,{isPrimary:!0,onClick:c},(0,E.__)("Select Stories","web-stories"))),s&&y.createElement(Xe,{closeStoryPicker:d,selectedStories:o,setSelectedStories:i,isSortingStories:n,setIsSortingStories:a,maxNumOfStories:Mt}))};const At=function SelectedStoriesEdit(e){let{icon:t,attributes:r,setAttributes:o,isSelected:i}=e;const{stories:s=[],archiveLinkLabel:l}=r,[n,a]=(0,Te.useState)(s),[c,d]=(0,Te.useState)([]),[u,m]=(0,Te.useState)(!1),h=(0,E.__)("Selected Stories","web-stories"),p=l||(0,E.__)("View All Stories","web-stories");(0,Te.useEffect)((()=>{r.stories.toString()!==n.toString()&&o({stories:n})}),[r.stories,o,n]),(0,Te.useEffect)((()=>{n.length&&!c.length&&m(!0)}),[n,c,m]);const b=(0,Te.useCallback)((e=>{d(e),a(e.map((e=>e.id)))}),[d]);return u?y.createElement(Pe,{icon:t,label:h,selectedStoryIds:n,setSelectedStories:b,setIsFetching:m}):y.createElement(y.Fragment,null,y.createElement(vt,{attributes:r,setAttributes:o,showFilters:!1}),Boolean(c?.length)&&y.createElement(Tt,{attributes:r,stories:c,viewAllLabel:p}),y.createElement(Bt,{icon:t,label:h,selectedStories:c,setSelectedStories:b,isEditing:i}))};const Ot=function WebStoriesEdit(e){let{attributes:t,setAttributes:r,className:o,isSelected:i}=e;const{blockType:s,viewType:l}=t;return s?s===lt||l?y.createElement(y.Fragment,null,y.createElement(pt,{blockType:s,viewType:l,setAttributes:r}),s===it&&y.createElement(Nt,{attributes:t,setAttributes:r}),s===st&&y.createElement(At,{icon:y.createElement(BlockIcon,null),attributes:t,setAttributes:r,isSelected:i}),s===lt&&y.createElement(ot,{icon:y.createElement(BlockIcon,null),attributes:t,setAttributes:r,className:o,isSelected:i})):y.createElement(bt,{icon:y.createElement(BlockIcon,null),setAttributes:r,instructions:(0,E.__)("Select a layout style","web-stories"),selectionOptions:mt,selectionType:"viewType"}):y.createElement(bt,{icon:y.createElement(BlockIcon,null),setAttributes:r,instructions:(0,E.__)("Embed a collection of your latest stories, select your own or enter an URL.","web-stories"),selectionOptions:nt,selectionType:"blockType"})},It=JSON.parse('{"name":"web-stories/embed","title":"Web Stories","description":"Embed Web Stories.","category":"embed","keywords":["embed","web stories","story","stories"],"textdomain":"web-stories","attributes":{"blockType":{"type":"string"},"url":{"type":"string"},"title":{"type":"string"},"poster":{"type":"string"},"width":{"type":"number","default":360},"height":{"type":"number","default":600},"align":{"type":"string","default":"none"},"stories":{"type":"array","default":[]},"viewType":{"type":"string","default":""},"numOfStories":{"type":"number","default":5},"numOfColumns":{"type":"number","default":2},"circleSize":{"type":"number","default":96},"imageAlignment":{"type":"string","default":"left"},"order":{"type":"string","default":""},"orderby":{"type":"string","default":""},"archiveLinkLabel":{"type":"string","default":""},"authors":{"type":"array","default":[]},"fieldState":{"type":"object","default":{}}},"supports":{"align":["wide","full","left","right","center"]}}'),{attributes:Wt}=It,Pt={from:[{type:"shortcode",tag:"web_stories_embed",attributes:{...Wt,align:{type:"string",shortcode:e=>{let{named:{align:t}}=e;return t}},height:{type:"number",shortcode:e=>{let{named:{height:t}}=e;return t}},poster:{type:"string",shortcode:e=>{let{named:{poster:t}}=e;return t}},title:{type:"string",shortcode:e=>{let{named:{title:t}}=e;return t}},url:{type:"string",shortcode:e=>{let{named:{url:t}}=e;return t}},width:{type:"number",shortcode:e=>{let{named:{width:t}}=e;return t}},blockType:{type:"string",default:lt}},priority:9},{type:"shortcode",tag:"web_stories",attributes:{...Wt,blockType:{type:"string",default:it},align:{type:"string",shortcode:e=>{let{named:{align:t}}=e;return t}},archiveLinkLabel:{type:"string",shortcode:e=>{let{named:{archive_link_label:t}}=e;return t}},viewType:{type:"string",shortcode:e=>{let{named:{view:t}}=e;return t}},numOfStories:{type:"number",shortcode:e=>{let{named:{number:t}}=e;return t}},numOfColumns:{type:"number",shortcode:e=>{let{named:{columns:t}}=e;return t}},circleSize:{type:"number",shortcode:e=>{let{named:{circle_size:t}}=e;return t}},fieldState:{type:"object",shortcode:e=>{let{named:{title:t,excerpt:r,author:o,date:i,archive_link:s,image_align:l}}=e;return{show_archive_link:"true"===s,show_author:"true"===o,show_date:"true"===i,show_excerpt:"true"===r,show_image_align:"true"===l,show_title:"true"===t}}}}},{type:"block",blocks:["core/legacy-widget"],isMatch:e=>{let{idBase:t,instance:r}=e;return!!r?.raw&&"web_stories_widget"===t},transform:e=>{let{instance:t}=e;const{raw:{archive_link_label:r,circle_size:o,image_alignment:i,number_of_columns:s,number_of_stories:l,view_type:n,show_title:a,show_author:c,show_date:d,show_excerpt:u,show_archive_link:m,sharp_corners:h,show_image_alignment:p,title:b,orderby:w="",order:g=""}}=t,f=(0,v.createBlock)("web-stories/embed",{blockType:"latest-stories",viewType:n,fieldState:{show_title:a,show_author:c,show_date:d,show_excerpt:u,show_archive_link:m,show_sharp_corners:h,show_image_alignment:p},archiveLinkLabel:r,circleSize:o,numOfColumns:s,imageAlignment:i,numOfStories:l,orderby:w.replace("post_",""),order:g.toLowerCase()});return b?[(0,v.createBlock)("core/heading",{content:b}),f]:f}}]},{name:Rt,category:zt,keywords:Dt,attributes:Ft,supports:$t}=It,jt={title:(0,E.__)("Web Stories","web-stories"),description:(0,E.__)("Embed stories using various layout options.","web-stories"),category:zt,icon:y.createElement(BlockIcon,null),keywords:Dt,attributes:Ft,example:{attributes:{blockType:it,viewType:at,numberOfColumns:2}},supports:$t,deprecated:xe,edit:Ot,save:Se,transforms:Pt};(0,v.registerBlockType)(Rt,jt),f("Embed Block",!1)})()})();